import{_ as B}from"./nuxt-link.pVTLLmdG.js";import{I as N,r as f,f as R,J as $,g as j,s as C,i as g,c as L,a as u,b as t,w as o,o as U,d,at as v,$ as V,_ as I}from"./entry.hCfP3g4x.js";import{m as S}from"./md5.V_qtkgdV.js";import{_ as T,a as E}from"./FormItem.96G1zSJC.js";import{_ as H}from"./Input.f_pMhJMr.js";import"./format-length.4l65r8M5.js";import"./use-merged-state.60fM8Yxs.js";const J={class:"container-full flex-col align-items-center header-mt-def"},M={class:"container flex-col align-items-center py-20"},O={class:"login_form"},z=u("h2",null,"用户注册",-1),A={class:"flex-row justify-content-end mt-10"},D={class:"flex-row align-items-center justify-content-end mt-10"},Z=Object.assign({name:"reg"},{__name:"reg",setup(F){const w=N(),c=f(null),p=R.user(),h=$(),_=j(),{place:b}=C(p),i=f(!1),s=g({email:"",password:"",re_password:""}),x=g({email:{key:"code",required:!0,trigger:["blur","input"],message:"请输入邮箱并确保格式正确",type:"email"},password:{required:!0,trigger:["blur","input"],message:"请输入密码，最少8位",validator:(a,e)=>e.length>=8},re_password:{required:!0,trigger:["blur","input"],message:"确认密码错误",validator:(a,e)=>e===s.password}}),k=()=>{var a;(a=c.value)==null||a.validate(async e=>{if(!e){let r=v(s,{place:b.value});console.log(r),_.start(),i.value=!0;const n=await V.post("user/reg",v({},r,{password:S(s.password)}),{server:!1});n&&(w.success("注册成功"),p.login(n.result),h.push({path:"/user"})),_.finish(),i.value=!1}}).catch(()=>!1)};return(a,e)=>{const r=H,n=E,m=I,y=B,q=T;return U(),L("div",J,[u("div",M,[u("div",O,[z,t(q,{ref_key:"formRef",ref:c,model:s,rules:x,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:o(()=>[t(n,{label:"邮箱",path:"email"},{default:o(()=>[t(r,{value:s.email,"onUpdate:value":e[0]||(e[0]=l=>s.email=l),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(n,{label:"密码",path:"password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),placeholder:"请输入密码"},null,8,["value"])]),_:1}),t(n,{label:"确认密码",path:"re_password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.re_password,"onUpdate:value":e[2]||(e[2]=l=>s.re_password=l),placeholder:"请输入确认密码"},null,8,["value"])]),_:1}),u("div",A,[t(m,{round:"",onClick:e[3]||(e[3]=l=>a.$router.back())},{default:o(()=>[d(" 返回 ")]),_:1}),t(m,{class:"ml-10",loading:i.value,round:"",color:"#ffd100","text-color":"#000",onClick:k},{default:o(()=>[d(" 注册 ")]),_:1},8,["loading"])]),u("div",D,[t(y,{to:"/user/login",class:"fs-16"},{default:o(()=>[d("登录")]),_:1})])]),_:1},8,["model","rules"])])])])}}});export{Z as default};
