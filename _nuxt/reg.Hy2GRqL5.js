import{_ as N}from"./nuxt-link.KuubLUz-.js";import{I as R,r as f,f as $,J as j,g as C,s as L,i as g,c as U,a as u,b as t,w as o,o as V,d,at as v,$ as I,_ as S}from"./entry.pfW3X8wa.js";import{m as T}from"./md5.V_qtkgdV.js";import{_ as E,a as H}from"./FormItem.RLatPSDm.js";import{_ as J}from"./Input.GGkRfrrd.js";import"./format-length.4l65r8M5.js";import"./use-merged-state.TA4wSwc6.js";const M={class:"container-full flex-col align-items-center header-mt-def"},O={class:"container flex-col align-items-center py-20"},z={class:"login_form"},A=u("h2",null,"用户注册",-1),D={class:"flex-row justify-content-end mt-10"},F={class:"flex-row align-items-center justify-content-end mt-10"},ee=Object.assign({name:"reg"},{__name:"reg",setup(G){const w=R(),c=f(null),p=$.user(),h=j(),_=C(),{place:b,vid:x}=L(p),i=f(!1),s=g({email:"",password:"",re_password:""}),k=g({email:{key:"code",required:!0,trigger:["blur","input"],message:"请输入邮箱并确保格式正确",type:"email"},password:{required:!0,trigger:["blur","input"],message:"请输入密码，最少8位",validator:(a,e)=>e.length>=8},re_password:{required:!0,trigger:["blur","input"],message:"确认密码错误",validator:(a,e)=>e===s.password}}),y=()=>{var a;(a=c.value)==null||a.validate(async e=>{if(!e){let r=v(s,{place:b.value,bd_vid:x.value||""});console.log(r),_.start(),i.value=!0;const n=await I.post("user/reg",v({},r,{password:T(s.password)}),{server:!1});n&&(w.success("注册成功"),p.login(n.result),h.push({path:"/user"})),_.finish(),i.value=!1}}).catch(()=>!1)};return(a,e)=>{const r=J,n=H,m=S,q=N,B=E;return V(),U("div",M,[u("div",O,[u("div",z,[A,t(B,{ref_key:"formRef",ref:c,model:s,rules:k,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:o(()=>[t(n,{label:"邮箱",path:"email"},{default:o(()=>[t(r,{value:s.email,"onUpdate:value":e[0]||(e[0]=l=>s.email=l),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(n,{label:"密码",path:"password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),placeholder:"请输入密码"},null,8,["value"])]),_:1}),t(n,{label:"确认密码",path:"re_password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.re_password,"onUpdate:value":e[2]||(e[2]=l=>s.re_password=l),placeholder:"请输入确认密码"},null,8,["value"])]),_:1}),u("div",D,[t(m,{round:"",onClick:e[3]||(e[3]=l=>a.$router.back())},{default:o(()=>[d(" 返回 ")]),_:1}),t(m,{class:"ml-10",loading:i.value,round:"",color:"#ffd100","text-color":"#000",onClick:y},{default:o(()=>[d(" 注册 ")]),_:1},8,["loading"])]),u("div",F,[t(q,{to:"/user/login",class:"fs-16"},{default:o(()=>[d("登录")]),_:1})])]),_:1},8,["model","rules"])])])])}}});export{ee as default};
