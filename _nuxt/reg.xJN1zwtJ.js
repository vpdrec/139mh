import{_ as x}from"./nuxt-link.p76U6641.js";import{I as k,r as y,f as q,J as B,g as N,i as _,c as $,a as l,b as t,w as o,o as j,d as i,$ as C,at as R,_ as U}from"./entry.gxCAEJoH.js";import{m as V}from"./md5.V_qtkgdV.js";import{_ as I,a as L}from"./FormItem.0qlekKuC.js";import{_ as S}from"./Input.6ojXMisI.js";import"./format-length.4l65r8M5.js";import"./use-merged-state.Rbl4vBYV.js";const E={class:"container-full flex-col align-items-center header-mt-def"},H={class:"container flex-col align-items-center py-20"},J={class:"login_form"},M=l("h2",null,"用户注册",-1),O={class:"flex-row justify-content-end mt-10"},T={class:"flex-row align-items-center justify-content-end mt-10"},W=Object.assign({name:"reg"},{__name:"reg",setup(z){const m=k(),d=y(null),f=q.user(),g=B(),p=N(),s=_({email:"",password:"",re_password:""}),w=_({email:{key:"code",required:!0,trigger:["blur","input"],message:"请输入邮箱并确保格式正确",type:"email"},password:{required:!0,trigger:["blur","input"],message:"请输入密码，最少8位",validator:(a,e)=>e.length>=8},re_password:{required:!0,trigger:["blur","input"],message:"确认密码错误",validator:(a,e)=>e===s.password}}),h=()=>{var a;(a=d.value)==null||a.validate(async e=>{if(!e){p.start();const r=await C.post("user/reg",R({},s,{password:V(s.password)}),{server:!1});r&&(m.success("注册成功"),f.login(r.result),g.push({path:"/user"})),p.finish()}}).catch(()=>!1)};return(a,e)=>{const r=S,u=L,c=U,v=x,b=I;return j(),$("div",E,[l("div",H,[l("div",J,[M,t(b,{ref_key:"formRef",ref:d,model:s,rules:w,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:o(()=>[t(u,{label:"邮箱",path:"email"},{default:o(()=>[t(r,{value:s.email,"onUpdate:value":e[0]||(e[0]=n=>s.email=n),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(u,{label:"密码",path:"password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.password,"onUpdate:value":e[1]||(e[1]=n=>s.password=n),placeholder:"请输入密码"},null,8,["value"])]),_:1}),t(u,{label:"确认密码",path:"re_password"},{default:o(()=>[t(r,{type:"password","show-password-on":"click",maxlength:32,value:s.re_password,"onUpdate:value":e[2]||(e[2]=n=>s.re_password=n),placeholder:"请输入确认密码"},null,8,["value"])]),_:1}),l("div",O,[t(c,{round:"",onClick:e[3]||(e[3]=n=>a.$router.back())},{default:o(()=>[i(" 返回 ")]),_:1}),t(c,{class:"ml-10",round:"",color:"#ffd100","text-color":"#000",onClick:h},{default:o(()=>[i(" 注册 ")]),_:1})]),l("div",T,[t(v,{to:"/user/login",class:"fs-16"},{default:o(()=>[i("登录")]),_:1})])]),_:1},8,["model","rules"])])])])}}});export{W as default};
