import{P as N,R as S,H as O,U as M,b0 as $,r as s,k as l,a1 as k,aw as P,Z as A}from"./entry.-w07o56L.js";let c=[];const C=new WeakMap;function F(){c.forEach(e=>e(...C.get(e))),c=[]}function H(e,...a){C.set(e,a),!c.includes(e)&&c.push(e)===1&&requestAnimationFrame(F)}function L(e){return typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e}function q(e){return e instanceof HTMLElement?e.scrollTop:window.scrollY}function U(e){return e instanceof HTMLElement?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}const j=N("affix",[S("affixed",{position:"fixed"},[S("absolute-positioned",{position:"absolute"})])]),W={listenTo:[String,Object,Function],top:Number,bottom:Number,triggerTop:Number,triggerBottom:Number,position:{type:String,default:"fixed"},offsetTop:{type:Number,validator:()=>!0,default:void 0},offsetBottom:{type:Number,validator:()=>!0,default:void 0},target:{type:Function,validator:()=>!0,default:void 0}},Z=O({name:"Affix",props:W,setup(e){const{mergedClsPrefixRef:a}=M(e);$("-affix",j,a);let n=null;const i=s(!1),f=s(!1),u=s(null),r=s(null),g=l(()=>f.value||i.value),p=l(()=>{var t,o;return(o=(t=e.triggerTop)!==null&&t!==void 0?t:e.offsetTop)!==null&&o!==void 0?o:e.top}),T=l(()=>{var t,o;return(o=(t=e.top)!==null&&t!==void 0?t:e.triggerTop)!==null&&o!==void 0?o:e.offsetTop}),x=l(()=>{var t,o;return(o=(t=e.bottom)!==null&&t!==void 0?t:e.triggerBottom)!==null&&o!==void 0?o:e.offsetBottom}),b=l(()=>{var t,o;return(o=(t=e.triggerBottom)!==null&&t!==void 0?t:e.offsetBottom)!==null&&o!==void 0?o:e.bottom}),R=s(null),w=()=>{const{target:t,listenTo:o}=e;t?n=t():o?n=L(o):n=document,n&&(n.addEventListener("scroll",d),d())};function d(){H(E)}function E(){const{value:t}=R;if(!n||!t)return;const o=q(n);if(g.value){r.value!==null&&o<r.value&&(i.value=!1,r.value=null),u.value!==null&&o>u.value&&(f.value=!1,u.value=null);return}const B=U(n),_=t.getBoundingClientRect(),y=_.top-B.top,h=B.bottom-_.bottom,v=p.value,m=b.value;v!==void 0&&y<=v?(i.value=!0,r.value=o-(v-y)):(i.value=!1,r.value=null),m!==void 0&&h<=m?(f.value=!0,u.value=o+m-h):(f.value=!1,u.value=null)}return k(()=>{w()}),P(()=>{n&&n.removeEventListener("scroll",d)}),{selfRef:R,affixed:g,mergedClsPrefix:a,mergedstyle:l(()=>{const t={};return i.value&&p.value!==void 0&&T.value!==void 0&&(t.top=`${T.value}px`),f.value&&b.value!==void 0&&x.value!==void 0&&(t.bottom=`${x.value}px`),t})}},render(){const{mergedClsPrefix:e}=this;return A("div",{ref:"selfRef",class:[`${e}-affix`,{[`${e}-affix--affixed`]:this.affixed,[`${e}-affix--absolute-positioned`]:this.position==="absolute"}],style:this.mergedstyle},this.$slots)}});export{Z as _};
